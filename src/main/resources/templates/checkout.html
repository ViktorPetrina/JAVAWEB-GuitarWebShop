<!DOCTYPE html>
<html lang="en">
<head>
    <title>Checkout - Guitar Store</title>
    <link rel="stylesheet" th:href="@{/css/checkout.css}">
    <link rel="stylesheet" th:href="@{/css/guitarListAndHeader.css}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>

<div th:replace="~{fragments/header}"></div>

<main class="cart-container">
    <h2>Checkout</h2>

    <div class="cart-summary">
        <h3>Order Summary</h3>
        <p class="total">Total Price: $<span th:text="${totalPrice}"></span></p>
    </div>

    <div class="checkout-form">
        <h3>Billing Details</h3>
        <form th:action="@{/GuitarStore/checkout}" method="post">

            <label for="name">Full Name:</label>
            <input type="text" id="name" name="name" required>

            <label for="address">Address:</label>
            <input type="text" id="address" name="address" required>

            <label>Payment Method:</label>
            <div class="payment-methods">
                <div class="payment-option">
                    <input type="radio" id="payment-on-delivery" name="paymentMethod" value="payment-on-delivery" checked>
                    <label for="payment-on-delivery">
                        <span class="payment-icon">ðŸšš</span> Payment on Delivery
                    </label>
                </div>
                <div class="payment-option">
                    <input type="radio" id="paypal" name="paymentMethod" value="paypal">
                    <label for="paypal">
                        <span class="payment-icon">ðŸ’³</span> PayPal
                    </label>
                </div>
            </div>

            <div id="payment-on-delivery-fields" style="display: block;">
                <p>You'll pay upon receiving the delivery.</p>
            </div>

            <div id="paypal-fields" style="display: none;">
                <label for="paypal-email">PayPal Email:</label>
                <input type="email" id="paypal-email" name="paypalEmail" required>
            </div>

            <button type="submit" class="checkout-btn">Confirm Purchase</button>
        </form>
    </div>
</main>

<script>
    document.querySelectorAll('input[name="paymentMethod"]').forEach((elem) => {
        elem.addEventListener("change", function(event) {
            if (event.target.value === "paypal") {
                document.getElementById("payment-on-delivery-fields").style.display = "none";
                document.getElementById("paypal-fields").style.display = "block";
            } else {
                document.getElementById("payment-on-delivery-fields").style.display = "block";
                document.getElementById("paypal-fields").style.display = "none";
            }
        });
    });
</script>

</body>
</html>
